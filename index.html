<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags always come first -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<!-- build:css css/main.css -->
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css" />

	<!-- Additional CSS must be placed after bootstrap.css -->
	<script src="https://kit.fontawesome.com/50affd80b8.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="node_modules/bootstrap-social/bootstrap-social.css" />
	<link rel="stylesheet" href="css/localstyles.css" />
	<!-- endbuild -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster|Open+Sans" />
	<title>Nextcloud :: Grocery</title>
</head>

<body>
	<header>
		<h4 id="list-title">List Title</h4>
	</header>

	<div id='list-root' class='accordion accordion-flush'>
	</div>

	<div id="json-display"></div>
	<input type="text" name="text" id="item-input">
	<button class="btn btn-primary" name="sweepButton" id="sweep-button"><span class="fa fa-solid fa-broom"></span></button>
	<button class="btn btn-success" name="resetButton" id="reset-button"><span class="fa fa-solid fa-refresh"></span></button>

	<footer>
	</footer>

	<!-- build:js js/main.js -->
	<!-- jQuery must come first, then Popper.js, then the Bootstrap JavaScript plugins.-->
	<!--<script src="node_modules/jquery/dist/jquery.slim.min.js"></script> -->
	<!--<script src="node_modules/popper.js/dist/umd/popper.min.js"></script> -->
	<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="js/scripts.js"></script>
	<script src="js/ListItem.js"></script>
	<script src="js/ShoppingList.js"></script>
	<!-- endbuild -->

	<script>
		/*
		const _TestList = [ ];
		const debug = true;
		fetch('res/TestList.json')
			.then(response => response.json())
			.then(Data => {
				Data.forEach((item) => _TestList.push(new ListItem(item)));
				_TestList.forEach((item) => {
					document.getElementById('list-root').appendChild(item.DOMElement);
					item.generateRevEls(item._RevEls);
				});
				//Data.forEach((item) => { document.getElementById('list-root').appendChild(item.DOMElement); });
				console.log(Data);
			});
		*/
		//const _TestList = new List(JSON.parse(fetch('res/testList-Listjs.json')));
		const debug = true;
		const jsonDisp = document.getElementById('json-display');
		let jsonData;
		const _TestList = new ShoppingList({ itemName: "placeholder" });

		fetch('res/testList-Listjs.json')
			.then(resp => resp.json())
			//.then(Data => jsonData = Data);
			.then(Data => {
				_TestList.listName = Data.listName;
				_TestList.listID = Data.listID;
				_TestList.creationDate = Data.creationDate;
				_TestList.modifyDate = Data.modifyDate;
				Data.items.forEach((item) => { _TestList.addItem(new ListItem(item), _TestList); });
			});
		_TestList.getListView(_TestList);
		_TestList.items.forEach((item) => item.generateRevEls(item._RevEls));

		//jsonDisp.textContent = jsonData;
/*
		const _TestList = new ShoppingList({
			itemName: jsonData.itemName,
			listID: jsonData.listID,
			creationDate: jsonData.creationDate,
			modifyDate: jsonData.modifyDate
		});

		jsonData.items.forEach((item) => _TestList.addItem(new ListItem(item)));

		_TestList.getListView;

//		let response = await fetch('res/testList-Listjs.json');
//		let result = await response.json();
/*
		if(resp.ok) {
			let jsonData = resp.json();
		} else {
			alert('HTTP status:', resp.status);
		}

		jsonDisp.textContent = jsonData;
		//document.getElementById('json-display').textContent = fetch('res/testList-Listjs.json');

		/*
		const _TestList = fetch('res/testList-Listjs.json').then(response => response.json())
			.then(Data => {
				const _LoadList = new List({
					listname: Data.listName,
					listID: Data.listID,
					creationDate: Data.creationDate,
					modifyDate: Data.modifyDate
					});
				Data.items.forEach((item) => _LoadList.addItem(new ListItem(item), _LoadList));
				return _LoadList;
			});
		_TestList.getListView(_TestList);



		/*
		fetch('res/testList-1656013633982.json')
			.then(response => response.json())
			.then(Data => {
				Data.items.forEach((item) => _TestList.addItem(new ListItem(item)));
				item.generateRevEls(item._RevEls);
			});
		*/
		//_TestList.getListView(_TestList);

	</script>

</body>

</html>


